<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.board.mapper.member.MemberMapper">
    <!-- 멤버의 모든 column -->
    <sql id = "member_cols">
        no
        , phone
        , withdrawn_at
        , pw
        , id
        , name
        , email 
    </sql>

    <!-- 새로운 멤버 등록 (회원가입) -->
    <insert id = "insMember" parameterType="com.board.dto.member.InsMemberDTO" useGeneratedKeys="true" keyProperty="no">
        INSERT INTO 
            member (
                name
                , id
                , pw
                , email
                , phone
            )
        VALUES (
            #{name}
            , #{id} 
            , #{pw} 
            , #{email} 
            , #{phone} 
            );
    </insert>

    <!-- 멤버 선택 -->
    <select id = "selectOne" parameterType="com.board.dto.member.SelectMemberDTO" resultType = "com.board.dto.member.MemberDTO">
        SELECT 
        <include refid = "member_cols" />
        FROM 
            member
        <where>
            <if test="id != null">
                AND id = #{id}
            </if>
            <if test="email != null">
                AND email = #{email}
            </if>
        </where>

    </select>

</mapper>